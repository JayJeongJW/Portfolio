{
  "name": "ì„œìš¸ì‹œ ê³„ì•½ë§ˆë‹¹ ì„œë¸Œ ì›Œí¬í”Œë¡œìš°",
  "nodes": [
    {
      "parameters": {
        "url": "https://contract.seoul.go.kr/new1/ppviews/searchCompany.do",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "recordCountPerPage",
              "value": "10"
            },
            {
              "name": "searchFlag",
              "value": "2"
            },
            {
              "name": "CER_SEQ",
              "value": "9"
            },
            {
              "name": "CER_SEQ_2",
              "value": "9"
            },
            {
              "name": "a_CUS_ADDR1",
              "value": "={{$json.a_CUS_ADDR1}}"
            },
            {
              "name": "currentPageNo",
              "value": "={{$json.currentPageNo}}"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36"
            },
            {
              "name": "Referer",
              "value": "https://contract.seoul.go.kr/new1/ppviews/searchCompany.do?recordCountPerPage=10&currentPageNo=1&totalPageCount=8118&searchFlag=2&CUS_NM=&CUS_ITM=&CUS_TAXNO=&CER_SEQ=10&CUS_ADDR1=0&CUS_SEQ=&CUS_NM_0=&CUS_ITM_0=&a_CUS_ADDR1=%EC%A0%84%EA%B5%AD&juso=&CER_SEQ_2=10&CUS_TAXNO_2=&CUS_NM_2=&CUS_ITM_2="
            }
          ]
        },
        "options": {
          "batching": {
            "batch": {
              "batchSize": 1
            }
          },
          "response": {
            "response": {
              "responseFormat": "text"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        736,
        208
      ],
      "id": "328fdd5c-7342-461a-8757-82d0ddd86c42",
      "name": "HTTP Request",
      "retryOnFail": true,
      "waitBetweenTries": 1000
    },
    {
      "parameters": {
        "operation": "extractHtmlContent",
        "extractionValues": {
          "values": [
            {
              "key": "ì—…ì²´ëª…",
              "cssSelector": "table.list-tbl-01 tbody tr:nth-of-type(2n-1) b",
              "returnArray": true
            },
            {
              "key": "ëŒ€í‘œí’ˆëª©",
              "cssSelector": "table.list-tbl-01 tbody tr:nth-of-type(2n) td.daily:first-child",
              "returnArray": true
            },
            {
              "key": "ì „í™”ë²ˆí˜¸",
              "cssSelector": "table.list-tbl-01 tbody tr:nth-of-type(2n) td.daily:nth-of-type(2)",
              "returnArray": true
            },
            {
              "key": "ì£¼ì†Œ",
              "cssSelector": "table.list-tbl-01 tbody tr:nth-of-type(2n) td.daily:nth-of-type(3)",
              "returnArray": true
            }
          ]
        },
        "options": {
          "trimValues": true,
          "cleanUpText": true
        }
      },
      "type": "n8n-nodes-base.html",
      "typeVersion": 1.2,
      "position": [
        960,
        208
      ],
      "id": "8fef67de-48f0-40c7-9b56-c5b0c22ea6e8",
      "name": "HTML"
    },
    {
      "parameters": {
        "jsCode": "// Run Once for All Items\n// ì´ JS ë…¸ë“œëŠ” \"ì•„ì´í…œ í•˜ë‚˜ë‹¹ í•œ ë²ˆ\"ì´ ì•„ë‹ˆë¼\n// HTML Nodeì—ì„œ ë„˜ì–´ì˜¨ ëª¨ë“  ì•„ì´í…œì„ í•œ ë²ˆì— ì²˜ë¦¬í•˜ë„ë¡ ì„¤ì •ë¨\n\n// HTML Node ê²°ê³¼ ì „ì²´ë¥¼ ë°°ì—´ë¡œ ê°€ì ¸ì˜´\n// (ë³´í†µ HTML NodeëŠ” ì»¬ëŸ¼ë³„ ë°°ì—´ í˜•íƒœì˜ ë°ì´í„°ë¥¼ ë°˜í™˜í•¨)\nconst items = $input.all();  \n\n// ìµœì¢…ì ìœ¼ë¡œ Notion / Excel ë“±ì— ì €ì¥í• \n// \"ì •ì œëœ í•œ í–‰ ë°ì´í„°\"ë“¤ì„ ë‹´ì„ ë°°ì—´\nconst output = [];\n\n// HTML Node ê²°ê³¼ëŠ” ë³´í†µ 1ê°œ ì•„ì´í…œì´ì§€ë§Œ,\n// êµ¬ì¡° ë³€ê²½ ëŒ€ë¹„ë¥¼ ìœ„í•´ ë°˜ë³µë¬¸ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬\nfor (const item of items) {\n  const inputData = item.json;\n\n  // HTML Nodeì—ì„œ CSS Selectorë¡œ ì¶”ì¶œí•œ ê²°ê³¼ëŠ”\n  // ê° ì»¬ëŸ¼ì´ \"ë°°ì—´(Array)\" í˜•íƒœë¡œ ë“¤ì–´ì˜´\n  // ì˜ˆ: ì—…ì²´ëª… = [\"AíšŒì‚¬\", \"BíšŒì‚¬\", ...]\n  const names = inputData[\"ì—…ì²´ëª…\"] || [];\n  const products = inputData[\"ëŒ€í‘œí’ˆëª©\"] || [];\n  const phones = inputData[\"ì „í™”ë²ˆí˜¸\"] || [];\n  const addresses = inputData[\"ì£¼ì†Œ\"] || [];\n\n  // ì—…ì²´ëª… ë°°ì—´ ê¸¸ì´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°˜ë³µ\n  // â†’ í•œ ì—…ì²´ = í•œ ì¤„ ë°ì´í„° ìƒì„±\n  for (let i = 0; i < names.length; i++) {\n    output.push({\n      json: {\n        // ì—…ì²´ëª…: ì•ë’¤ ê³µë°± ì œê±°\n        // ê°’ì´ ì—†ì„ ê²½ìš° ë¹ˆ ë¬¸ìì—´ ì²˜ë¦¬ (ì—ëŸ¬ ë°©ì§€)\n        ì—…ì²´ëª…: names[i] ? names[i].trim() : \"\",\n\n        // ëŒ€í‘œí’ˆëª©: \"ëŒ€í‘œí’ˆëª© |\" ê°™ì€ ë¶ˆí•„ìš”í•œ í…ìŠ¤íŠ¸ ì œê±°\n        // ì‚¬ì´íŠ¸ HTMLì— í¬í•¨ëœ ë ˆì´ë¸” ì •ë¦¬ ëª©ì \n        ëŒ€í‘œí’ˆëª©: products[i]\n          ? products[i].replace(/^ëŒ€í‘œí’ˆëª©\\s*\\|\\s*/, \"\").trim()\n          : \"\",\n\n        // ì „í™”ë²ˆí˜¸: \"ì „í™”ë²ˆí˜¸ |\" ì œê±°\n        ì „í™”ë²ˆí˜¸: phones[i]\n          ? phones[i].replace(/^ì „í™”ë²ˆí˜¸\\s*\\|\\s*/, \"\").trim()\n          : \"\",\n\n        // ì£¼ì†Œ: \"ì£¼ì†Œ |\" ì œê±°\n        ì£¼ì†Œ: addresses[i]\n          ? addresses[i].replace(/^ì£¼ì†Œ\\s*\\|\\s*/, \"\").trim()\n          : \"\",\n      },\n    });\n  }\n}\n\n// ìµœì¢… ê²°ê³¼ ë°˜í™˜\n// â†’ í•œ ì—…ì²´ë‹¹ 1ê°œ ì•„ì´í…œ í˜•íƒœë¡œ ë³€í™˜ë˜ì–´\n// â†’ ë‹¤ìŒ ë…¸ë“œ(Notion / Excel ì €ì¥)ë¡œ ì „ë‹¬ë¨\nreturn output;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1184,
        208
      ],
      "id": "8f151780-53ee-4b22-99da-345fb4b98256",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "eab324b9-6b3d-431e-a671-1f9dba1a65b2",
              "name": "currentPageNo",
              "value": "={{ $json.page ? $json.page.toString() : \"1\" }}",
              "type": "string"
            },
            {
              "id": "85fc961c-cfc1-429d-ad14-30fd0cda4b6f",
              "name": "a_CUS_ADDR1",
              "value": "={{ $json[\"a_CUS_ADDR1\"] ? $json[\"a_CUS_ADDR1\"].toString().trim() : \"ì „êµ­\" }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        544,
        208
      ],
      "id": "02eb9b05-58e5-4879-a1f8-5d343dcea508",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "inputSource": "jsonExample",
        "jsonExample": "{\n  \"page\": 1\n}\n"
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        368,
        208
      ],
      "id": "daa0f8af-f2e4-4b90-98cd-80cf6fdde0bb",
      "name": "When Executed by Another Workflow"
    },
    {
      "parameters": {
        "resource": "databasePage",
        "databaseId": {
          "__rl": true,
          "value": "2dc08a66-306a-8084-a1ab-f39dfe85eef9",
          "mode": "list",
          "cachedResultName": "ì„œìš¸ì‹œê³„ì•½ë§ˆë‹¹ ì†Œê¸°ì—…",
          "cachedResultUrl": "https://www.notion.so/2dc08a66306a8084a1abf39dfe85eef9"
        },
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "ì—…ì²´ëª…|title",
              "title": "={{ $json['ì—…ì²´ëª…'] }}"
            },
            {
              "key": "ëŒ€í‘œí’ˆëª©|rich_text",
              "textContent": "={{ $json['ëŒ€í‘œí’ˆëª©'] }}"
            },
            {
              "key": "ì „í™”ë²ˆí˜¸|rich_text",
              "textContent": "={{ $json['ì „í™”ë²ˆí˜¸'] }}"
            },
            {
              "key": "ì£¼ì†Œ|rich_text",
              "textContent": "={{ $json['ì£¼ì†Œ'] }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [
        1408,
        208
      ],
      "id": "da47cf4e-5eff-4049-a853-f16bc5c02e79",
      "name": "Create a database page",
      "credentials": {
        "notionApi": {
          "id": "bmx1d2lLPPkBeYft",
          "name": "Notion account 3"
        }
      }
    },
    {
      "parameters": {
        "content": "ë¬´ë£Œë²„ì „ í´ë¼ìš°ë“œ í™˜ê²½\n\nğŸ”µ Part 2. Sub Workflow (ë°ì´í„° ìˆ˜ì§‘ ë° ì •ì œ)\n\nì„œë¸Œ ì›Œí¬í”Œë¡œìš° ì±…ì„ ë²”ìœ„\n\nì…ë ¥ê°’: page (Number)\n\nì—­í• :\n\n- ì™¸ë¶€ ì‚¬ì´íŠ¸ HTTP ìš”ì²­\n\n- HTML íŒŒì‹±\n\n- ë°ì´í„° ì •ì œ\n\n- ìµœì¢… ì €ì¥(Notion/Excel)\n\nâŒ í˜ì´ì§€ ë°˜ë³µ / ë£¨í”„ ì œì–´ëŠ” í•˜ì§€ ì•ŠìŒ\n(ë©”ì¸ ì›Œí¬í”Œë¡œìš° ì±…ì„)",
        "height": 416,
        "width": 320,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        0,
        -144
      ],
      "id": "1aff19e2-c6ec-45fe-94f2-600f7b879dd7",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "1. Set Node (ë°ì´í„° ì „ì²˜ë¦¬)\n\nì—­í• : HTTP Request ì „ íŒŒë¼ë¯¸í„° ì •ì œ\n\nì°¸ê³ : ë‹¨ìˆœ ì‚¬ì´íŠ¸ êµ¬ì¡°ë¼ë©´ ìƒëµ ê°€ëŠ¥, ë³µì¡í•œ ì¿¼ë¦¬ ëŒ€ì‘ ì‹œ í•„ìš”\n",
        "height": 128,
        "width": 320,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        416,
        32
      ],
      "id": "2de57345-5f15-4cf1-a343-b08a9a5b9ed7",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "2. HTTP Request Node (ë°ì´í„° í†µì‹ )\n\ní•µì‹¬ ì„¤ì •: Headers â†’ ì‹¤ì œ ë¸Œë¼ìš°ì € í™˜ê²½ê³¼ ë™ì¼í•˜ê²Œ êµ¬ì„±\n\nìµœì í™”: Batching & Retry on Fail â†’ ë¬´ë£Œ í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ì¤‘ë‹¨ ìœ„í—˜ ìµœì†Œí™”\n\nì°¸ê³ : Response Format = Text\në¡œ ë°”ê¾¸ë©´, n8nì´ ì‘ë‹µì„ ê·¸ëƒ¥ í…ìŠ¤íŠ¸ë¡œ ë°›ì•„ì„œ ì§€ì •í•œ í•„ë“œì— ë¬¸ìì—´ë¡œ ë„£ì–´ì£¼ê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ ì—†ì´ ë‹¤ë£° ìˆ˜ ìˆìŒ",
        "height": 256,
        "width": 272,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        448,
        384
      ],
      "id": "7380515e-1b54-41b2-b4b4-8588e3ca424e",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "3. HTML Node (íŒŒì‹±)\n\nì—­í• : CSS Selector ì´ìš© â†’ í•„ìš”í•œ ì»¬ëŸ¼ ì¶”ì¶œ\n\nì˜µì…˜: Trim/Clean â†’ ë¶ˆí•„ìš”í•œ ê³µë°±/íŠ¹ìˆ˜ë¬¸ì ì œê±°\n\nì°¸ê³ : Open API ì‚¬ìš© ì‹œ ìƒëµ ê°€ëŠ¥\n\nCSS Selector ê¸°ë°˜ íŒŒì‹± êµ¬ì¡°\n\nì‚¬ì´íŠ¸ ê°œí¸ ì‹œ:\n\n- ë¸Œë¼ìš°ì € ê°œë°œìë„êµ¬ë¡œ selector ì¬í™•ì¸\n\n- HTML Node selector ìˆ˜ì •\n\n- JS Node ë°°ì—´ ê¸¸ì´(names.length ë“±) ì •ìƒ ì—¬ë¶€ í™•ì¸",
        "height": 368,
        "width": 352,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        832,
        -192
      ],
      "id": "315afaa9-d0aa-422f-8b66-d7dd14a79d49",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "4. JS Node (ìµœì¢… ì •ì œ)\n\nì—­í• : HTML ì•„ì›ƒí’‹ â†’ ë°°ì—´(Array) í˜•íƒœ ì¬êµ¬ì„±, ìµœì¢… ë°ì´í„° í¬ë§·íŒ…\n",
        "height": 96,
        "width": 288,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1120,
        416
      ],
      "id": "3b135c13-4c29-4c7e-ae2b-d99d17610399",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "5. Notion / Excel Node\n\në…¸ì…˜ ì‚¬ìš© ì´ìœ : ë‹¤ê³„ì • ì—°ë™ ë° Excel ì‚¬ìš© ì‹œ ì¶©ëŒ ë¬¸ì œ ë°œìƒ â†’ ì„ì‹œë¡œ ë…¸ì…˜ìœ¼ë¡œ ì²˜ë¦¬\n\nê¶Œì¥: Excel / Google Sheets ë…¸ë“œ ì‚¬ìš©\n\në‹¤ë¥¸ ì‚¬ìš©ìëŠ” ê³„ì • ì¶©ëŒ ì´ìŠˆê°€ ì ìœ¼ë¯€ë¡œ ì›¬ë§Œí•˜ë©´ ì—‘ì…€ ì‚¬ìš© ê¶Œì¥\n\nğŸ’¡ Tip: ê°€ëŠ¥í•˜ë©´ Excel/Google Sheetsë¡œ ì „í™˜ â†’ ì•ˆì •ì ì´ê³  ì§ê´€ì ì¸ ë°ì´í„° ê´€ë¦¬ ê°€ëŠ¥",
        "height": 240,
        "width": 352,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1296,
        -64
      ],
      "id": "d68f8e24-8eca-49a5-9bd5-7189136c7eb5",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "- ì„œìš¸ì‹œ ê³„ì•½ë§ˆë‹¹: .../searchCompany.do?currentPageNo=1ê³¼ ê°™ì´ ë¬¼ìŒí‘œ(?) ë’¤ì— íŒŒë¼ë¯¸í„° ì´ë¦„ê³¼ ê°’ì„ ë¶™ì´ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì´ ë°©ì‹ì¼ ë•Œë§Œ n8nì˜ Query Parameters ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ Name: currentPageNo, Value: 1ê³¼ ê°™ì´ ì§€ì •í•˜ê²Œ ë©ë‹ˆë‹¤.\n",
        "height": 112,
        "width": 368,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        720,
        384
      ],
      "id": "f401a621-6e76-4e9d-a9b1-567bb7cad3db",
      "name": "Sticky Note6"
    }
  ],
  "pinData": {
    "When Executed by Another Workflow": [
      {
        "json": {
          "page": 0
        },
        "pairedItem": {
          "item": 0
        }
      }
    ]
  },
  "connections": {
    "HTTP Request": {
      "main": [
        [
          {
            "node": "HTML",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTML": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Create a database page",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create a database page": {
      "main": [
        []
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false,
    "timeSavedMode": "fixed",
    "saveDataErrorExecution": "all",
    "saveDataSuccessExecution": "none",
    "callerPolicy": "workflowsFromSameOwner"
  },
  "versionId": "3ad076e6-8b57-476e-a30e-085bae0e878e",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "df37452c8170ba46bcd0bd45229bb3082b88fbe77398aef13369302538f85ded"
  },
  "id": "MsVRaLx8gwQXxEc8",
  "tags": []
}